<div class="row" *ngIf="artist">
  <div class="col-md-10">
    <h1>
      {{ artist.name }}
      <span *ngIf="artist && artist.abbreviation">
        ({{ artist.abbreviation }})
      </span>
    </h1>

    <div aria-label="Alphabet" *ngIf="! toggleArtistLinksFlag">
      <button *ngFor="let y of artist._computed.years"
      (click)="this.year = y; loadYear();"
      [ngClass]="{ 
        'btn-primary': y == year
      }"

        >  
        {{ y }}
      </button>
    </div>
  </div>

  <div class="col-md-2" *ngIf="artist">          
    <div class="btn-group">
      <div ngbDropdown class="d-inline-block btn-group">
        <button class="btn btn-outline-primary" id="performanceActionsDropdown" ngbDropdownToggle>Actions</button>
        <div ngbDropdownMenu aria-labelledby="performanceActionsDropdown">
          <button 
            (click)="toggleArtistLinks()"
            *ngIf="halArtistLink && halArtistLink._embedded.artist_link.length"
            class="dropdown-item"
          >
            View Artist Link<span *ngIf="halArtistLink._embedded.artist_link.length > 1">s</span>
            ({{ halArtistLink._embedded.artist_link.length }})
          </button>
          <div *ngIf="halArtistLink && halArtistLink._embedded.artist_link.length" class="dropdown-divider"></div>

          <button class="dropdown-item" 
            [routerLink]="['/performance/create']"
            [queryParams]="{ artist_id: artist.id }"            
          >
            Create Performance
          </button>
          <button class="dropdown-item">Create Artist Link</button>
          <div class="dropdown-divider"></div>
          <button class="dropdown-item" (click)="toggleAudit()">View Audit</button>
        </div>
      </div>    
    </div>
  </div>
</div>
  
<div class="row" *ngIf="! toggleArtistLinksFlag && halPerformance">
  <div class="col-md-12 text-right" style="padding-top: 1em;">
    <span *ngIf="halPerformance">
      Page {{ halPerformance.page }} of {{ halPerformance.page_count }}
    </span>
    <div class="btn-group" role="group" aria-label="Pagination">
      <button 
        *ngFor="let link of halPerformance._links | keyvalue " 
        (click)="loadLink(link.value)"
        type="button" 
        class="btn btn-primary">
        {{ link.key }}
      </button>
    </div>
  </div>
</div>
  
<table class="table table-striped" *ngIf="! toggleArtistLinksFlag && halPerformance">
  <thead>
    <tr>
      <th>
        <div class="container">
          <div class="row cursor-sortable">
            <div (click)="sort('performanceDate')" class="col-md-2">
              Date
            </div>
            <div (click)="sort('name')" class="col-md-3" title="Field Name: name">
              Artist Name
            </div>
            <div (click)="sort('venue')" class="col-md-3" title="Field Name: venue">
              Venue
            </div>
            <div (click)="sort('city')" class="col-md-3" title="Field Name: city">
              City
            </div>
            <div (click)="sort('state')" class="col-md-1" title="Field Name: state">
              State
            </div>
          </div>
        </div>              
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let performance of halPerformance._embedded.performance">
      <td>
        <div class="container">
          <div class="row">
            <div class="col-md-2">
              <a [routerLink]="['/performance/' + performance.id]">{{ performance.performanceDate }}</a>
            </div>
            <div class="col-md-3 cursor-clickable" (click)="toggle(performance)">
              {{ performance._embedded.artist.name }}
            </div>
            <div class="col-md-3 cursor-clickable" (click)="toggle(performance)" asdsdafasdf>
              {{ performance.venue }}
            </div>
            <div class="col-md-3 cursor-clickable" (click)="toggle(performance)">
              {{ performance.city }}
            </div>
            <div class="col-md-1 cursor-clickable" (click)="toggle(performance)">
              {{ performance.state}}
            </div>
          </div>
        </div>
      </td>
    </tr>
  </tbody>
</table>

  <!-- PerformanceLinks -->
  <div class="row" *ngIf="toggleArtistLinksFlag">
    <div class="col-md-12">
      <table class="table table-striped table-hover">
        <caption class="alert alert-primary alert-dismissible" role="alert">
          Links
          <button 
            (click)="toggleArtistLinks()" 
            type="button" 
            class="close" 
            data-dismiss="alert" 
            aria-label="Close"
          >
            <span aria-hidden="true">&times;</span>
          </button>
        </caption>
        <thead>
          <tr>
            <th>Name</th>
            <th>URL</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let link of halArtistLink._embedded.artist_link">
            <td>{{ link.name }}</td>
            <td><a href="{{ link.url }}">{{ link.url }}</a></td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
  